{"sections":[],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/vigramsdk\/step7laserservice"]}],"kind":"article","metadata":{"title":"Using Laser service","modules":[{"name":"VigramSDK"}],"role":"article","images":[{"type":"icon","identifier":"logo.png"}],"roleHeading":"Article"},"schemaVersion":{"minor":3,"major":0,"patch":0},"primaryContentSections":[{"kind":"content","content":[{"level":2,"text":"Overview","type":"heading","anchor":"Overview"},{"inlineContent":[{"text":"Use a LaserService to start laser distance recording sessions with a given configuration.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Note:","type":"text"}],"type":"strong"},{"type":"text","text":" viDoc Light does not have lasers. This step can be skipped."}]},{"inlineContent":[{"type":"text","text":"viDoc has 2 lasers. Bottom and back"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"When using a laser, it has the following quality indicators of measurement:","type":"text"}]},{"code":["extension DeviceMessage.Measurement {","    public enum MeasurementQuality {","        \/\/ best quality ","        case good","        \/\/ acceptable quality","        case acceptable","        \/\/ bad quality","        case bad","        \/\/ measurement is error","        case error","    }","}"],"syntax":"swift","type":"codeListing"},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Important:"}],"type":"strong"},{"text":" viDoc analyzes the quality of the measurement itself. If the measurement is good or acceptable, it is good measurement. If the measurement has a lower quality, the measurement is considered erroneous. This is important for Single Point measurements.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Note:"}]},{"type":"text","text":" If use the bottom laser and the measurement value is more or equal 40 meters, this measurement will be considered erroneous. The measurement value of the back laser is more or equal 20 meters is also not reliable."}]},{"inlineContent":[{"text":"To use lasers, you need to create an instance of the LaserService class.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Creates a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/LaserService"},{"text":" to retrieve laser distance data from a viDoc device.","type":"text"}]},{"syntax":"swift","code":["let laserService = Vigram.laserService(peripheral: peripheral)"],"type":"codeListing"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"To check the status of lasers, run the query"}]}]}]},{"code":["laserService","    .getLasersStatus()","    .sink(receiveCompletion: { completion in","        switch completion {","        case .finished:","            \/\/ Value successfully received","            break","        case let .failure(error):","            \/\/ Error getting value","            \/\/ Do something with error","            print(error.localizedDescription)","        }","    }) { laserState in","            switch laserState {","            case .backIsOn:","                \/\/ \"Back laser is on\"","            case .bothOff:","                \/\/ \"Both lasers are off\"","            case .bottomIsOn:","                \/\/ \"Bottom laser is on\"","            }","    }.store(in: &subscription)"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Receive value:"}],"type":"strong"},{"text":" ","type":"text"},{"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/DeviceMessage\/LaserState","type":"reference","isActive":true}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Throw error:","type":"text"}]},{"type":"text","text":" "},{"type":"reference","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/PeripheralError","isActive":true}]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Note:","type":"text"}],"type":"strong"},{"text":" Only available for firmware 1.0.0 and higher","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"To turn on the laser","type":"text"}]}]}]},{"code":["let typeOfLaser: LaserConfiguration.Position = .bottom \/\/ or .back","laserService","    .turnOnLaser(at: typeOfLaser)","    .sink(receiveCompletion: { completion in","        switch completion {","        case .finished:","            \/\/ Value successfully received","            break","        case let .failure(error):","            \/\/ Error getting value","            \/\/ Do something with error","            print(error.localizedDescription)","        }","    }) { _ in }.store(in: &subscription) \/\/ _ - not needed (Void)","}"],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"inlineContent":[{"text":"Receive value:","type":"text"}],"type":"strong"},{"text":" Void","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Throw error:"}]},{"type":"text","text":" "},{"type":"reference","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/PeripheralError","isActive":true}]},{"items":[{"content":[{"inlineContent":[{"text":"To turn off the laser","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"syntax":"swift","code":["let typeOfLaser: LaserConfiguration.Position = .bottom \/\/ or .back","laserService","    .turnOffLaser(at: typeOfLaser)","    .sink(receiveCompletion: { completion in","        switch completion {","        case .finished:","            \/\/ Value successfully received","            break","        case let .failure(error):","            \/\/ Error getting value","            \/\/ Do something with error","            print(error.localizedDescription)","        }","    }) { _ in }.store(in: &subscription) \/\/ _ - not needed (Void)","}"],"type":"codeListing"},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Receive value:","type":"text"}]},{"text":" Void","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Throw error:","type":"text"}]},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/PeripheralError"}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Note"}]},{"type":"text","text":": It doesnâ€™t matter which laser you choose, both lasers turn off."}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"To make laser measurements (not Single Point measurements), you can use the query:"}]}]}],"type":"unorderedList"},{"syntax":"swift","code":["let duration = 30","","let typeOfLaser: LaserConfiguration.Position = .bottom \/\/ or .back","","let laserMode: LaserConfiguration.ShotMode = .fast \/\/ or .slow or .auto","","let laserConfig = LaserConfiguration.init(shotMode: laserMode, ","                                          position: typeOfLaser, ","                                          duration: duration)","laserService","    .startLaser(with: laserConfig)","    .sink(receiveCompletion: { completion in","        switch completion {","        case .finished:","            \/\/ Value successfully received","            break","        case let .failure(error):","            \/\/ Error getting value","            \/\/ Do something with error","            print(error.localizedDescription)","        }","    }){ currentMeasurement in ","        \/\/ do something with measurements","    }.store(in: &subscription)"],"type":"codeListing"},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Receive value:","type":"text"}]},{"text":" ","type":"text"},{"type":"reference","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/DeviceMessage\/Measurement","isActive":true}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Throw error:"}]},{"text":" ","type":"text"},{"isActive":true,"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/PeripheralError","type":"reference"}]},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Note"}]},{"type":"text","text":": Please note that the measurement duration value for firmware less than 1.0.0 is possible in the range from 1 to 60."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"For firmware 1.0.0 and higher, there is no time limit. If you set the value = 0, the measurements will be performed indefinitely. To stop the measurements, you must execute the turnOffLaser command"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"This completes the laser setup. You can now proceed to ","type":"text"},{"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step8SinglePoint","type":"reference","isActive":true,"overridingTitle":"SinglePoint measurements.","overridingTitleInlineContent":[{"text":"SinglePoint measurements.","type":"text"}]}]},{"type":"paragraph","inlineContent":[{"type":"emphasis","inlineContent":[{"type":"text","text":"All methods and functions specified in this manual are also available in the "},{"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/vigram-sw\/SDK_iOS_viDoc_Distribution\/tree\/demo\/"}]}]},{"text":"More information about","level":3,"anchor":"More-information-about","type":"heading"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/combine","isActive":true}]}]},{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/corebluetooth"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/UseCombineAndPublishers","type":"reference","isActive":true,"overridingTitleInlineContent":[{"text":"Using Combine and Publishers","type":"text"}],"overridingTitle":"Using Combine and Publishers"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"type":"reference","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/SDKErrorsAndExceptions","overridingTitleInlineContent":[{"type":"text","text":"SDK Errors and exceptions"}],"overridingTitle":"SDK Errors and exceptions"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"https:\/\/github.com\/vigram-sw\/SDK_iOS_viDoc_Distribution\/tree\/demo\/","overridingTitle":"Demo repository","overridingTitleInlineContent":[{"type":"text","text":"Demo repository"}],"isActive":true}]}]}],"type":"unorderedList"},{"text":"Navigation","anchor":"Navigation","type":"heading","level":2},{"inlineContent":[{"overridingTitleInlineContent":[{"type":"text","text":"Up to Getting started with VigramSDK"}],"isActive":true,"type":"reference","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/GettingStarted","overridingTitle":"Up to Getting started with VigramSDK"}],"type":"paragraph"},{"inlineContent":[{"type":"reference","isActive":true,"overridingTitle":"âœ… STEP 1 (Import VigramSDK)","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step1GettingStarted","overridingTitleInlineContent":[{"text":"âœ… STEP 1 (Import VigramSDK)","type":"text"}]}],"type":"paragraph"},{"inlineContent":[{"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step2SDKAuthentication","type":"reference","overridingTitle":"âœ… STEP 2 (SDK Authentication)","overridingTitleInlineContent":[{"type":"text","text":"âœ… STEP 2 (SDK Authentication)"}],"isActive":true}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"overridingTitleInlineContent":[{"text":"âœ… STEP 3 (Description of configuration parameters)","type":"text"}],"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step3ConfigurationParameters","overridingTitle":"âœ… STEP 3 (Description of configuration parameters)"}]},{"inlineContent":[{"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step4SettingUpBluetoothService","isActive":true,"overridingTitleInlineContent":[{"text":"âœ… STEP 4 (Setting up Bluetooth service)","type":"text"}],"type":"reference","overridingTitle":"âœ… STEP 4 (Setting up Bluetooth service)"}],"type":"paragraph"},{"inlineContent":[{"isActive":true,"type":"reference","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step5WorkWithPeripheral","overridingTitleInlineContent":[{"text":"âœ… STEP 5 (Work with viDoc (Peripheral))","type":"text"}],"overridingTitle":"âœ… STEP 5 (Work with viDoc (Peripheral))"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"overridingTitle":"âœ… STEP 6 (Using NTRIP correction)","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step6UsingNTRIP","isActive":true,"type":"reference","overridingTitleInlineContent":[{"text":"âœ… STEP 6 (Using NTRIP correction)","type":"text"}]}]},{"inlineContent":[{"inlineContent":[{"text":"âœ… STEP 7 (Using LaserService)","type":"text"}],"type":"strong"}],"type":"paragraph"},{"inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step8SinglePoint","overridingTitle":"STEP 8 (Using SinglePoint Measurements)","overridingTitleInlineContent":[{"type":"text","text":"STEP 8 (Using SinglePoint Measurements)"}]}],"type":"paragraph"}]}],"identifier":{"url":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step7LaserService","interfaceLanguage":"swift"},"hierarchy":{"paths":[["doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK"]]},"references":{"https://github.com/vigram-sw/SDK_iOS_viDoc_Distribution/tree/demo/":{"title":"Demo repository","titleInlineContent":[{"text":"Demo repository","type":"text"}],"identifier":"https:\/\/github.com\/vigram-sw\/SDK_iOS_viDoc_Distribution\/tree\/demo\/","type":"link","url":"https:\/\/github.com\/vigram-sw\/SDK_iOS_viDoc_Distribution\/tree\/demo\/"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/Step1GettingStarted":{"abstract":[],"images":[{"type":"icon","identifier":"logo.png"}],"title":"Import VigramSDK","url":"\/documentation\/vigramsdk\/step1gettingstarted","type":"topic","role":"article","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step1GettingStarted","kind":"article"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/LaserService":{"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/LaserService","navigatorTitle":[{"text":"LaserService","kind":"identifier"}],"type":"topic","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"LaserService"}],"role":"symbol","abstract":[{"text":"Use a LaserService to start laser distance recording sessions with a given configuration.","type":"text"}],"kind":"symbol","url":"\/documentation\/vigramsdk\/laserservice","title":"LaserService"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/PeripheralError":{"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/PeripheralError","fragments":[{"text":"enum","kind":"keyword"},{"kind":"text","text":" "},{"text":"PeripheralError","kind":"identifier"}],"navigatorTitle":[{"kind":"identifier","text":"PeripheralError"}],"role":"symbol","abstract":[{"text":"PeripheralError combines different failure events that can be emitted on sending data to a ","type":"text"},{"isActive":true,"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Peripheral","type":"reference"},{"text":".","type":"text"}],"title":"PeripheralError","url":"\/documentation\/vigramsdk\/peripheralerror","kind":"symbol","type":"topic"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/DeviceMessage/Measurement":{"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/DeviceMessage\/Measurement","title":"DeviceMessage.Measurement","kind":"symbol","navigatorTitle":[{"text":"Measurement","kind":"identifier"}],"type":"topic","role":"symbol","abstract":[{"text":"Device message containing measurement data","type":"text"}],"url":"\/documentation\/vigramsdk\/devicemessage\/measurement","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Measurement"}]},"logo.png":{"variants":[{"traits":["1x","light"],"url":"\/images\/com.vigram.VigramSDK\/logo.png"}],"alt":"Vigram logo.","identifier":"logo.png","type":"image"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/Peripheral":{"abstract":[{"type":"text","text":"Peripheral provides a write and receive interface to communicate with the viDoc device."}],"type":"topic","title":"Peripheral","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Peripheral","kind":"symbol","url":"\/documentation\/vigramsdk\/peripheral","role":"symbol","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"Peripheral"}],"navigatorTitle":[{"kind":"identifier","text":"Peripheral"}]},"doc://com.vigram.VigramSDK/documentation/VigramSDK/Step3ConfigurationParameters":{"kind":"article","title":"Description of configuration parameters","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step3ConfigurationParameters","url":"\/documentation\/vigramsdk\/step3configurationparameters","abstract":[],"role":"article","type":"topic","images":[{"type":"icon","identifier":"logo.png"}]},"doc://com.vigram.VigramSDK/documentation/VigramSDK/Step2SDKAuthentication":{"kind":"article","title":"SDK Authentication","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step2SDKAuthentication","url":"\/documentation\/vigramsdk\/step2sdkauthentication","abstract":[],"role":"article","type":"topic","images":[{"identifier":"logo.png","type":"icon"}]},"doc://com.vigram.VigramSDK/documentation/VigramSDK":{"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK","type":"topic","abstract":[],"kind":"symbol","url":"\/documentation\/vigramsdk","role":"collection","title":"VigramSDK","images":[{"type":"icon","identifier":"logo.png"}]},"https://developer.apple.com/documentation/combine":{"title":"Apple Combine Documentation","titleInlineContent":[{"text":"Apple Combine Documentation","type":"text"}],"identifier":"https:\/\/developer.apple.com\/documentation\/combine","type":"link","url":"https:\/\/developer.apple.com\/documentation\/combine"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/Step6UsingNTRIP":{"title":"Using NTRIP correction","images":[{"identifier":"logo.png","type":"icon"}],"type":"topic","url":"\/documentation\/vigramsdk\/step6usingntrip","abstract":[],"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step6UsingNTRIP","kind":"article","role":"article"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/Step5WorkWithPeripheral":{"title":"Work with viDoc (Peripheral)","images":[{"identifier":"logo.png","type":"icon"}],"type":"topic","url":"\/documentation\/vigramsdk\/step5workwithperipheral","abstract":[],"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step5WorkWithPeripheral","kind":"article","role":"article"},"https://developer.apple.com/documentation/corebluetooth":{"title":"CoreBluetooth Documentation","titleInlineContent":[{"type":"text","text":"CoreBluetooth Documentation"}],"identifier":"https:\/\/developer.apple.com\/documentation\/corebluetooth","type":"link","url":"https:\/\/developer.apple.com\/documentation\/corebluetooth"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/Step8SinglePoint":{"kind":"article","title":"Using Single point measurements","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step8SinglePoint","url":"\/documentation\/vigramsdk\/step8singlepoint","abstract":[],"role":"article","type":"topic","images":[{"identifier":"logo.png","type":"icon"}]},"doc://com.vigram.VigramSDK/documentation/VigramSDK/Step4SettingUpBluetoothService":{"images":[{"type":"icon","identifier":"logo.png"}],"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step4SettingUpBluetoothService","url":"\/documentation\/vigramsdk\/step4settingupbluetoothservice","type":"topic","kind":"article","title":"Setting up Bluetooth service","role":"article","abstract":[]},"doc://com.vigram.VigramSDK/documentation/VigramSDK/GettingStarted":{"kind":"article","title":"Getting Started with VigramSDK","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/GettingStarted","url":"\/documentation\/vigramsdk\/gettingstarted","abstract":[],"role":"article","type":"topic","images":[{"identifier":"logo.png","type":"icon"}]},"doc://com.vigram.VigramSDK/documentation/VigramSDK/UseCombineAndPublishers":{"kind":"article","title":"Using Combine and Publishers","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/UseCombineAndPublishers","url":"\/documentation\/vigramsdk\/usecombineandpublishers","abstract":[],"role":"article","type":"topic","images":[{"identifier":"logo.png","type":"icon"}]},"doc://com.vigram.VigramSDK/documentation/VigramSDK/SDKErrorsAndExceptions":{"abstract":[],"images":[{"identifier":"logo.png","type":"icon"}],"title":"SDK Errors and exceptions","url":"\/documentation\/vigramsdk\/sdkerrorsandexceptions","type":"topic","role":"article","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/SDKErrorsAndExceptions","kind":"article"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/DeviceMessage/LaserState":{"url":"\/documentation\/vigramsdk\/devicemessage\/laserstate","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/DeviceMessage\/LaserState","kind":"symbol","navigatorTitle":[{"text":"LaserState","kind":"identifier"}],"role":"symbol","fragments":[{"kind":"keyword","text":"enum"},{"text":" ","kind":"text"},{"kind":"identifier","text":"LaserState"}],"title":"DeviceMessage.LaserState","abstract":[{"type":"text","text":"Device message containing laser status data"}],"type":"topic"}}}
{"metadata":{"roleHeading":"Article","role":"article","modules":[{"name":"VigramSDK"}],"images":[{"type":"icon","identifier":"logo.png"}],"title":"Using Laser service"},"schemaVersion":{"major":0,"minor":3,"patch":0},"variants":[{"paths":["\/documentation\/vigramsdk\/step7laserservice"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"article","sections":[],"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","text":"Overview","level":2,"type":"heading"},{"type":"paragraph","inlineContent":[{"text":"Use a LaserService to start laser distance recording sessions with a given configuration.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Note:"}]},{"text":" viDoc Light does not have lasers. This step can be skipped.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"viDoc has 2 lasers. Bottom and back","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"When using a laser, it has the following quality indicators of measurement:"}]},{"syntax":"swift","type":"codeListing","code":["extension DeviceMessage.Measurement {","    public enum MeasurementQuality {","        \/\/ best quality ","        case good","        \/\/ acceptable quality","        case acceptable","        \/\/ bad quality","        case bad","        \/\/ measurement is error","        case error","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Important:","type":"text"}]},{"text":" viDoc analyzes the quality of the measurement itself. If the measurement is good or acceptable, it is good measurement. If the measurement has a lower quality, the measurement is considered erroneous. This is important for Single Point measurements.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Note:"}]},{"type":"text","text":" If use the bottom laser and the measurement value is more or equal 40 meters, this measurement will be considered erroneous. The measurement value of the back laser is more or equal 20 meters is also not reliable."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To use lasers, you need to create an instance of the LaserService class."}]},{"type":"paragraph","inlineContent":[{"text":"Creates a ","type":"text"},{"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/LaserService","type":"reference","isActive":true},{"text":" to retrieve laser distance data from a viDoc device.","type":"text"}]},{"syntax":"swift","type":"codeListing","code":["let laserService = Vigram.laserService(peripheral: peripheral)"]},{"items":[{"content":[{"inlineContent":[{"text":"To check the status of lasers, run the query","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"syntax":"swift","type":"codeListing","code":["laserService","    .getLasersStatus()","    .sink(receiveCompletion: { completion in","        switch completion {","        case .finished:","            \/\/ Value successfully received","            break","        case let .failure(error):","            \/\/ Error getting value","            \/\/ Do something with error","            print(error.localizedDescription)","        }","    }) { laserState in","            switch laserState {","            case .backIsOn:","                \/\/ \"Back laser is on\"","            case .bothOff:","                \/\/ \"Both lasers are off\"","            case .bottomIsOn:","                \/\/ \"Bottom laser is on\"","            }","    }.store(in: &subscription)"]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Receive value:"}]},{"text":" ","type":"text"},{"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/DeviceMessage\/LaserState","type":"reference","isActive":true}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Throw error:"}]},{"type":"text","text":" "},{"type":"reference","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/PeripheralError","isActive":true}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Note:"}]},{"type":"text","text":" Only available for firmware 1.0.0 and higher"}]},{"items":[{"content":[{"inlineContent":[{"text":"To turn on the laser","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"syntax":"swift","type":"codeListing","code":["let typeOfLaser: LaserConfiguration.Position = .bottom \/\/ or .back","laserService","    .turnOnLaser(at: typeOfLaser)","    .sink(receiveCompletion: { completion in","        switch completion {","        case .finished:","            \/\/ Value successfully received","            break","        case let .failure(error):","            \/\/ Error getting value","            \/\/ Do something with error","            print(error.localizedDescription)","        }","    }) { _ in }.store(in: &subscription) \/\/ _ - not needed (Void)","}"]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Receive value:","type":"text"}]},{"type":"text","text":" Void"}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Throw error:"}]},{"type":"text","text":" "},{"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/PeripheralError","isActive":true,"type":"reference"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"To turn off the laser"}]}]}],"type":"unorderedList"},{"syntax":"swift","type":"codeListing","code":["let typeOfLaser: LaserConfiguration.Position = .bottom \/\/ or .back","laserService","    .turnOffLaser(at: typeOfLaser)","    .sink(receiveCompletion: { completion in","        switch completion {","        case .finished:","            \/\/ Value successfully received","            break","        case let .failure(error):","            \/\/ Error getting value","            \/\/ Do something with error","            print(error.localizedDescription)","        }","    }) { _ in }.store(in: &subscription) \/\/ _ - not needed (Void)","}"]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Receive value:","type":"text"}],"type":"strong"},{"text":" Void","type":"text"}]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Throw error:","type":"text"}],"type":"strong"},{"type":"text","text":" "},{"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/PeripheralError","isActive":true,"type":"reference"}]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Note"}],"type":"strong"},{"text":": It doesnâ€™t matter which laser you choose, both lasers turn off.","type":"text"}]},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"To make laser measurements (not Single Point measurements), you can use the query:"}],"type":"paragraph"}]}],"type":"unorderedList"},{"syntax":"swift","type":"codeListing","code":["let duration = 30","","let typeOfLaser: LaserConfiguration.Position = .bottom \/\/ or .back","","let laserMode: LaserConfiguration.ShotMode = .fast \/\/ or .slow or .auto","","let laserConfig = LaserConfiguration.init(shotMode: laserMode, ","                                          position: typeOfLaser, ","                                          duration: duration)","laserService","    .startLaser(with: laserConfig)","    .sink(receiveCompletion: { completion in","        switch completion {","        case .finished:","            \/\/ Value successfully received","            break","        case let .failure(error):","            \/\/ Error getting value","            \/\/ Do something with error","            print(error.localizedDescription)","        }","    }){ currentMeasurement in ","        \/\/ do something with measurements","    }.store(in: &subscription)"]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Receive value:"}]},{"type":"text","text":" "},{"type":"reference","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/DeviceMessage\/Measurement","isActive":true}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Throw error:"}]},{"type":"text","text":" "},{"type":"reference","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/PeripheralError","isActive":true}]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Note","type":"text"}],"type":"strong"},{"text":": Please note that the measurement duration value for firmware less than 1.0.0 is possible in the range from 1 to 60.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"For firmware 1.0.0 and higher, there is no time limit. If you set the value = 0, the measurements will be performed indefinitely. To stop the measurements, you must execute the turnOffLaser command","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"This completes the laser setup. You can now proceed to ","type":"text"},{"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step8SinglePoint","isActive":true,"overridingTitle":"SinglePoint measurements.","overridingTitleInlineContent":[{"type":"text","text":"SinglePoint measurements."}],"type":"reference"}]},{"type":"paragraph","inlineContent":[{"type":"emphasis","inlineContent":[{"text":"All methods and functions specified in this manual are also available in the ","type":"text"},{"isActive":true,"identifier":"https:\/\/github.com\/vigram-sw\/SDK_iOS_viDoc_Distribution\/tree\/demo\/","type":"reference"}]}]},{"anchor":"More-information-about","text":"More information about","level":3,"type":"heading"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"identifier":"https:\/\/developer.apple.com\/documentation\/combine","isActive":true,"type":"reference"}]}]},{"content":[{"inlineContent":[{"identifier":"https:\/\/developer.apple.com\/documentation\/corebluetooth","type":"reference","isActive":true}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"overridingTitle":"Using Combine and Publishers","isActive":true,"overridingTitleInlineContent":[{"text":"Using Combine and Publishers","type":"text"}],"type":"reference","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/UseCombineAndPublishers"}]}]},{"content":[{"inlineContent":[{"isActive":true,"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/SDKErrorsAndExceptions","overridingTitle":"SDK Errors and exceptions","overridingTitleInlineContent":[{"type":"text","text":"SDK Errors and exceptions"}],"type":"reference"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"reference","overridingTitle":"Demo repository","overridingTitleInlineContent":[{"type":"text","text":"Demo repository"}],"identifier":"https:\/\/github.com\/vigram-sw\/SDK_iOS_viDoc_Distribution\/tree\/demo\/","isActive":true}],"type":"paragraph"}]}],"type":"unorderedList"},{"anchor":"Navigation","text":"Navigation","level":2,"type":"heading"},{"type":"paragraph","inlineContent":[{"overridingTitleInlineContent":[{"type":"text","text":"Up to Getting started with VigramSDK"}],"type":"reference","overridingTitle":"Up to Getting started with VigramSDK","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/GettingStarted","isActive":true}]},{"type":"paragraph","inlineContent":[{"overridingTitle":"âœ… STEP 1 (Import VigramSDK)","type":"reference","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step1GettingStarted","isActive":true,"overridingTitleInlineContent":[{"type":"text","text":"âœ… STEP 1 (Import VigramSDK)"}]}]},{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step2SDKAuthentication","isActive":true,"type":"reference","overridingTitle":"âœ… STEP 2 (SDK Authentication)","overridingTitleInlineContent":[{"text":"âœ… STEP 2 (SDK Authentication)","type":"text"}]}]},{"type":"paragraph","inlineContent":[{"isActive":true,"overridingTitleInlineContent":[{"type":"text","text":"âœ… STEP 3 (Description of configuration parameters)"}],"type":"reference","overridingTitle":"âœ… STEP 3 (Description of configuration parameters)","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step3ConfigurationParameters"}]},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"overridingTitle":"âœ… STEP 4 (Setting up Bluetooth service)","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step4SettingUpBluetoothService","overridingTitleInlineContent":[{"text":"âœ… STEP 4 (Setting up Bluetooth service)","type":"text"}]}]},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"overridingTitle":"âœ… STEP 5 (Work with viDoc (Peripheral))","overridingTitleInlineContent":[{"type":"text","text":"âœ… STEP 5 (Work with viDoc (Peripheral))"}],"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step5WorkWithPeripheral"}]},{"type":"paragraph","inlineContent":[{"isActive":true,"overridingTitle":"âœ… STEP 6 (Using NTRIP correction)","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step6UsingNTRIP","type":"reference","overridingTitleInlineContent":[{"type":"text","text":"âœ… STEP 6 (Using NTRIP correction)"}]}]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"âœ… STEP 7 (Using LaserService)"}],"type":"strong"}]},{"type":"paragraph","inlineContent":[{"isActive":true,"overridingTitle":"STEP 8 (Using SinglePoint Measurements)","type":"reference","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step8SinglePoint","overridingTitleInlineContent":[{"type":"text","text":"STEP 8 (Using SinglePoint Measurements)"}]}]}]}],"hierarchy":{"paths":[["doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK"]]},"identifier":{"url":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step7LaserService","interfaceLanguage":"swift"},"references":{"doc://com.vigram.VigramSDK/documentation/VigramSDK":{"kind":"symbol","role":"collection","type":"topic","url":"\/documentation\/vigramsdk","title":"VigramSDK","abstract":[],"images":[{"type":"icon","identifier":"logo.png"}],"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/Step1GettingStarted":{"url":"\/documentation\/vigramsdk\/step1gettingstarted","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step1GettingStarted","kind":"article","title":"Import VigramSDK","abstract":[],"type":"topic","images":[{"type":"icon","identifier":"logo.png"}],"role":"article"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/Step4SettingUpBluetoothService":{"images":[{"identifier":"logo.png","type":"icon"}],"type":"topic","abstract":[],"kind":"article","url":"\/documentation\/vigramsdk\/step4settingupbluetoothservice","role":"article","title":"Setting up Bluetooth service","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step4SettingUpBluetoothService"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/DeviceMessage/LaserState":{"abstract":[{"type":"text","text":"Device message containing laser status data"}],"type":"topic","navigatorTitle":[{"text":"LaserState","kind":"identifier"}],"kind":"symbol","title":"DeviceMessage.LaserState","url":"\/documentation\/vigramsdk\/devicemessage\/laserstate","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/DeviceMessage\/LaserState","role":"symbol","fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LaserState","kind":"identifier"}]},"doc://com.vigram.VigramSDK/documentation/VigramSDK/GettingStarted":{"abstract":[],"kind":"article","role":"article","images":[{"type":"icon","identifier":"logo.png"}],"title":"Getting Started with VigramSDK","url":"\/documentation\/vigramsdk\/gettingstarted","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/GettingStarted","type":"topic"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/Step6UsingNTRIP":{"role":"article","title":"Using NTRIP correction","kind":"article","abstract":[],"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step6UsingNTRIP","url":"\/documentation\/vigramsdk\/step6usingntrip","type":"topic","images":[{"identifier":"logo.png","type":"icon"}]},"doc://com.vigram.VigramSDK/documentation/VigramSDK/DeviceMessage/Measurement":{"url":"\/documentation\/vigramsdk\/devicemessage\/measurement","role":"symbol","title":"DeviceMessage.Measurement","type":"topic","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Measurement"}],"kind":"symbol","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/DeviceMessage\/Measurement","navigatorTitle":[{"kind":"identifier","text":"Measurement"}],"abstract":[{"type":"text","text":"Device message containing measurement data"}]},"https://github.com/vigram-sw/SDK_iOS_viDoc_Distribution/tree/demo/":{"title":"Demo repository","titleInlineContent":[{"text":"Demo repository","type":"text"}],"identifier":"https:\/\/github.com\/vigram-sw\/SDK_iOS_viDoc_Distribution\/tree\/demo\/","type":"link","url":"https:\/\/github.com\/vigram-sw\/SDK_iOS_viDoc_Distribution\/tree\/demo\/"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/LaserService":{"fragments":[{"kind":"keyword","text":"protocol"},{"text":" ","kind":"text"},{"text":"LaserService","kind":"identifier"}],"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/LaserService","navigatorTitle":[{"text":"LaserService","kind":"identifier"}],"url":"\/documentation\/vigramsdk\/laserservice","kind":"symbol","abstract":[{"text":"Use a LaserService to start laser distance recording sessions with a given configuration.","type":"text"}],"type":"topic","title":"LaserService","role":"symbol"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/Step8SinglePoint":{"abstract":[],"kind":"article","url":"\/documentation\/vigramsdk\/step8singlepoint","title":"Using Single point measurements","images":[{"identifier":"logo.png","type":"icon"}],"role":"article","type":"topic","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step8SinglePoint"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/Peripheral":{"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Peripheral","abstract":[{"type":"text","text":"Peripheral provides a write and receive interface to communicate with the viDoc device."}],"kind":"symbol","type":"topic","role":"symbol","url":"\/documentation\/vigramsdk\/peripheral","title":"Peripheral","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"Peripheral"}],"navigatorTitle":[{"kind":"identifier","text":"Peripheral"}]},"doc://com.vigram.VigramSDK/documentation/VigramSDK/PeripheralError":{"fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"PeripheralError"}],"abstract":[{"type":"text","text":"PeripheralError combines different failure events that can be emitted on sending data to a "},{"type":"reference","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Peripheral","isActive":true},{"type":"text","text":"."}],"type":"topic","title":"PeripheralError","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/PeripheralError","navigatorTitle":[{"kind":"identifier","text":"PeripheralError"}],"role":"symbol","url":"\/documentation\/vigramsdk\/peripheralerror","kind":"symbol"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/Step5WorkWithPeripheral":{"images":[{"identifier":"logo.png","type":"icon"}],"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step5WorkWithPeripheral","url":"\/documentation\/vigramsdk\/step5workwithperipheral","type":"topic","role":"article","kind":"article","title":"Work with viDoc (Peripheral)","abstract":[]},"logo.png":{"variants":[{"traits":["1x","light"],"url":"\/images\/com.vigram.VigramSDK\/logo.png"}],"identifier":"logo.png","alt":"Vigram logo.","type":"image"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/SDKErrorsAndExceptions":{"abstract":[],"kind":"article","role":"article","images":[{"type":"icon","identifier":"logo.png"}],"title":"SDK Errors and exceptions","url":"\/documentation\/vigramsdk\/sdkerrorsandexceptions","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/SDKErrorsAndExceptions","type":"topic"},"https://developer.apple.com/documentation/combine":{"title":"Apple Combine Documentation","titleInlineContent":[{"text":"Apple Combine Documentation","type":"text"}],"identifier":"https:\/\/developer.apple.com\/documentation\/combine","type":"link","url":"https:\/\/developer.apple.com\/documentation\/combine"},"https://developer.apple.com/documentation/corebluetooth":{"identifier":"https:\/\/developer.apple.com\/documentation\/corebluetooth","titleInlineContent":[{"text":"CoreBluetooth Documentation","type":"text"}],"type":"link","url":"https:\/\/developer.apple.com\/documentation\/corebluetooth","title":"CoreBluetooth Documentation"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/UseCombineAndPublishers":{"kind":"article","type":"topic","role":"article","abstract":[],"url":"\/documentation\/vigramsdk\/usecombineandpublishers","title":"Using Combine and Publishers","images":[{"type":"icon","identifier":"logo.png"}],"identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/UseCombineAndPublishers"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/Step3ConfigurationParameters":{"abstract":[],"kind":"article","role":"article","images":[{"type":"icon","identifier":"logo.png"}],"title":"Description of configuration parameters","url":"\/documentation\/vigramsdk\/step3configurationparameters","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step3ConfigurationParameters","type":"topic"},"doc://com.vigram.VigramSDK/documentation/VigramSDK/Step2SDKAuthentication":{"role":"article","title":"SDK Authentication","kind":"article","type":"topic","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/Step2SDKAuthentication","abstract":[],"url":"\/documentation\/vigramsdk\/step2sdkauthentication","images":[{"type":"icon","identifier":"logo.png"}]}}}
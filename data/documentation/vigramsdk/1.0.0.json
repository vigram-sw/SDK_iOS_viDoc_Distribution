{"primaryContentSections":[{"kind":"content","content":[{"type":"heading","anchor":"What-is-the-new-on-this-release","level":2,"text":"What is the new on this release"},{"anchor":"Authentication","text":"Authentication","level":4,"type":"heading"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Refactoring token verification","type":"text"}]}]}]},{"inlineContent":[{"type":"text","text":"The SDK authentication has been refactoring. The authentication method is remains the same. Usage:"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["Vigram.initial(token: \"token\")",".check()",".sink { completion in ","    \/\/ do somethind with completion","} receiveValue: { result in","    switch(result) {","        case .success:","            \/\/ Successfull authentication","        case .failure(let error):","            \/\/ Do something with error","    }","}.store(in: &subscription)"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can still also check the current validity of the token. Usage:"}]},{"code":["let tokenIsValid = Vigram.tokenIsValid()","","switch tokenIsValid {","case .success(let result):","    if result == true {","        \/\/\/ successful result","    } else {","       \/\/\/ not successful result","    }","case .failure(let error):","    \/\/\/ Error Handling AuthenticationError type","}"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Now the SDK offline operation time after successful authentication is equal 20 days. After the first successful authentication, no additional method calls are required. Revalidation of an already authorized token is performed automatically after successfully connecting to the web and launching the SDK."}]},{"text":"Peripheral","type":"heading","anchor":"Peripheral","level":4},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Added a new protocol for working with the viDoc."}]}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The protocol version and device version of the viDoc are checked and detected automatically on the SDK side."}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Add variable currentDevice - return the device version of the viDoc."}]}]}]},{"type":"codeListing","syntax":"swift","code":["peripheral.currentDevice",".sink(receiveValue: { value in","\/\/ value.hasFrontLaser","\/\/if false - laser is not supported (e.g. viDoc Light)","","\/\/ value.hasBottomLaser","\/\/ if false - laser is not supported (e.g. viDoc Light)","","\/\/ value.getHousing","\/\/ get current device housing (if available)","","\/\/ value.getMount ","\/\/ get current device mount (if available)","","switch value.typeOfDevice {","    case .viDoc:","        \/\/ viDoc with lasers","    case .viDocLight:","        \/\/ viDoc Light (without lasers)","    case .unknown:","        \/\/ Unknown device - SDK will be disconnect to this device","    case .viDocWithOldSoftware:","        \/\/ viDoc with old software","    case .viDocOldDevice:","        \/\/ viDoc (old Device)","    }","}).store(in: &self.subscription)"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Note: Value is updated automatically"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Add new entities.","type":"text"}],"type":"paragraph"}]}]},{"type":"codeListing","syntax":"swift","code":["enum Housings: String {","    case unknown = \"unknown\"","    case printed3d = \"3D printed\"","    case aluminiumBlank = \"aluminium blank\"","    case eloxatedBlack = \"black eloxated\"","    case paintedBlack1 = \"black painted version 1\"","    case paintedBlack2 = \"black painted version 2\"","    case paintedGray = \"grey painted\"","    case paintedBlue = \"blue painted\"","    case paintedRed = \"red painted\"","    case testSample = \"Test sample housing (Prototype) grey\"","}","","enum Mounts: String {","    case tablet = \"viDoc Tablet (old tablet mount)\"","    case spc = \"SPC\"","    case spcPlus = \"SPC+\"","    case spcPlusRegularly = \"SPC+ (regularly produced)\"","    case spcPlusBackPlate = \"SPC+ (backplate replaced)\"","    case spcPlusPrototype = ","        \"SPC+ Prototype (SPC connection 1.5 mm lower as \\\"C\\\" version)\"","}","","struct HardwareRevisions {","    let vigramRef: String","    let vigramBat: String","    let m88Laser: String?","    let l81Laser: String?","    let imu: String?","    let isCalibrated: Bool?","}","","enum DeviceVersion {","    case viDoc","    case viDocLight","    case viDocWithOldSoftware","    case viDocOldDevice","    case unknown","}"]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Add new cases in PeripheralError."}],"type":"paragraph"}]}]},{"code":["\/\/ This method is not supported in current software version of","\/\/ the RTK device (new methods for old viDoc HW)","case requestIsNotSupported(String)","","\/\/ This method is not available in this case ","\/\/ (new methods for old protocol)","case accessDenied(String)","","\/\/ The current RTK device is incompatible in ","\/\/ this SDK version (unknown device)","case deviceNumberIsIncompatible","","\/\/ The current software of the connected RTK device is ","\/\/ incompatible in this SDK version (unknown HW)","case deviceSoftwareIsIncompatible"],"type":"codeListing","syntax":"swift"},{"level":4,"text":"Laser service","anchor":"Laser-service","type":"heading"},{"items":[{"content":[{"inlineContent":[{"text":"Refactoring laser turnOn.","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Lasers now operate more stably."}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Refactoring laser measurements."}]}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"text":"On the old protocol version, the setting range for the measurement duration was 5…60. There was also no possibility to interrupt a measurement that had already started.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The new version of the protocol has no restrictions on measurement time."}]},{"inlineContent":[{"type":"text","text":"Note: If set the value to 0, the measurement will go on infinity. If need to terminate measurements, perform the method to turn off the laser. In new protocol turnLaserOff method will disabled both lasers in one command."},{"text":" ","type":"text"},{"text":"(Available only on the new protocol - HW of viDoc 0.2.1.(12) and up)","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Added get lasers status method","type":"text"}]}]}]},{"code":["laserService.getLasersStatus()",".sink(receiveCompletion: { completion in ","    \/\/ do somethind with completion","}) { result in","    switch result {","        case .backIsOn:","            \/\/ Back laser is on","        case .bothOff:","            \/\/ Both lasers are off","        case .bottomIsOn:","            \/\/ Bottom laser is on\"","        }","}.store(in: &subscription)"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Note: Available only on the new protocol - HW of viDoc 0.2.1.(12) and up"}]},{"anchor":"SinglePoint","type":"heading","text":"SinglePoint","level":4},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Add unlimited duration measurement.","type":"text"}]}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"type":"text","text":"On the old protocol version, the setting range for the measurement duration was 5…60. There was also no possibility to interrupt a measurement that had already started."}]},{"type":"paragraph","inlineContent":[{"text":"The new version of the protocol has no restrictions on measurement time.","type":"text"}]},{"inlineContent":[{"type":"text","text":"Note: If set the duration value to 0, the measurement will go on infinity. If need to terminate measurements, perform the method stopMeasurement."},{"text":" ","type":"text"},{"type":"text","text":"(Available only on the new protocol - HW of viDoc 0.2.1.(12) and up)"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"Example:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["singlePointRecordingService.startMeasurement()",".sink(receiveCompletion: { completion in ","    \/\/ do somethind with completion","}) { value in","    \/\/ do somethind with value","}.store(in: &subscription)"]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Add stop measurement method","type":"text"}]}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Example:"}]},{"code":["singlePointRecordingService.stopMeasurement()"],"type":"codeListing","syntax":"swift"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Add cancel measurement method","type":"text"}]}]}]},{"inlineContent":[{"text":"Example:","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["singlePointRecordingService.cancelMeasurement()"],"type":"codeListing"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Add mesurement duration time state","type":"text"}],"type":"paragraph"}]}]},{"type":"codeListing","code":["var measurementTime: StatePublisher<TimeInterval> { get }"],"syntax":"swift"},{"inlineContent":[{"text":"Example:","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["singlePointRecordingService.measurementTime",".sink { value in","    \/\/ do somethind with value","}.store(in: &subscription)"],"syntax":"swift"}]}],"hierarchy":{"paths":[["doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK"]]},"metadata":{"title":"1.0.0","modules":[{"name":"VigramSDK"}],"roleHeading":"Article","images":[{"identifier":"logo.png","type":"icon"}],"role":"article"},"schemaVersion":{"major":0,"patch":0,"minor":3},"identifier":{"url":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK\/1.0.0","interfaceLanguage":"swift"},"variants":[{"paths":["\/documentation\/vigramsdk\/1.0.0"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"article","sections":[],"references":{"doc://com.vigram.VigramSDK/documentation/VigramSDK":{"kind":"symbol","abstract":[],"images":[{"type":"icon","identifier":"logo.png"}],"type":"topic","title":"VigramSDK","url":"\/documentation\/vigramsdk","identifier":"doc:\/\/com.vigram.VigramSDK\/documentation\/VigramSDK","role":"collection"},"logo.png":{"alt":"Vigram logo.","type":"image","variants":[{"url":"\/images\/com.vigram.VigramSDK\/logo.png","traits":["1x","light"]}],"identifier":"logo.png"}}}